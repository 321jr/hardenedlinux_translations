# NIST 特别出版 800-125A 修订版本 1

# 基于服务器的虚拟机监视器平台的安全性建议

Ramaswamy Chandramouli 著

计算机安全分部，信息科技实验室

此出版物可从此处免费获得：

[https://doi.org/10.6028/NIST.SP.800-125Ar1](https://doi.org/10.6028/NIST.SP.800-125Ar1)

2018 年六月

美国商务部 秘书 Wilbur L. Ross, Jr.

美国国家标准技术研究所 NIST 主任和标准技术商务次长 Walter Copan

## 权力范围

此出版物由 NIST 开发以符合其在 2014 年的美国联邦信息安全现代化法案（FISMA），美国法典第 44 章 3551 节及其下的内容，公法（P.L.）113-283。NIST 负责为联邦信息系统开发信息安全标准和指南，但是这些标准和指南不应该被应用于国家安全系统，如果没有对这些系统行使政策权力的适当的联邦官员的明确许可。此指南同美国行政管理和预算局（OMB）公告 A-130 的要求相一致。

此出版物中的任何内容都不应该被用于否认由美国商务部秘书在法定权力下规定的对于联邦政府机构具有强制性和法律约束力的标准和指导意见。这些指导意见也不应该被解读为更改或者取代商务部秘书、行政管理和预算局主任，或是任何其他联邦官员的现有权力。此出版物可以在自愿的基础上被非政府组织使用，并且不受美国版权的限制。但是 NIST 要求署名权。

美国国家标准技术研究所特别出版 800-125A 修订版本 1

Natl. Inst. Stand. Technol. Spec. Publ. 800-125A Rev. 1，38 页（2018 年六月）

[https://doi.org/10.6028/NIST.SP.800-125Ar1](https://doi.org/10.6028/NIST.SP.800-125Ar1)

CODEN：NSPUE2

> 此文档中可能会提到某些商业实体、设备或者器材以便充分地描述某种试验程序或者概念。这样的提名的本意并非暗示 NIST 对其的推荐或认可，也非暗示这些实体、器材或者设备一定是可用于该目的之最好的。

> 此文档中可能会有对于 NIST 的当前正在开发中的其他出版物的引用，以便符合其被赋予的法定责任。此出版物中的信息，包括概念和方法论，可以被联邦政府机构使用，即使是在这些附带的出版物完成之前。因此，直到每部出版物完成之前，当前的要求、指导意见和过程在其所存在之处仍然有效。关于计划和迁移的目的，联邦政府机构可能想要紧密跟踪由 NIST 提供的这些新出版物的进展。

> 我们鼓励组织机构在公开评论期间审阅所有出版物草案，并且向 NIST 提供反馈。除了上述出版物以外，NIST 的众多计算机安全出版物可以从 [https://csrc.nist.gov/publications](https://csrc.nist.gov/publications) 获取。

关于此出版物的评论可以被提交至：

美国国家标准技术研究所

收件人：计算机安全分部，信息科技实验室，办事处大道 100 号（8930 邮递点），盖瑟斯堡，马里兰州 20899-8930

邮件：[sp800-125A-comments@nist.gov](mailto:sp800-125A-comments@nist.gov)

所有评论必须在美国信息自由法（FOIA）条款下发布。

## 计算机系统技术报告

位于美国国家标准技术研究所（NIST）的信息科技实验室（ITL）通过为国家的测定和标准基础设施提供技术领导来提升美国经济和公众福利。ITL 通过开发测试、测试方法、参考数据、概念实现的证明以及技术分析来推进信息科技的发展及其生产性的使用。ITL 的职责包括为联邦信息系统中的国家安全相关信息以外的成本高效的安全性和隐私性开发管理、行政、技术和物理方面的标准和指导意见。此特别出版 800 系列报导了 ITL 的研究、指导意见及其在信息系统安全领域的延伸努力，以及与行业、政府和学术组织之间的合作活动。

## 摘要

虚拟机监视器平台是一系列提供了硬件资源（诸如 CPU、内存、网络和存储等）虚拟化的软件模块的集合，并且因此允许称为虚拟机（VM）的多个计算栈（由操作系统（OS）和应用程序构成）运行在单一物理宿主上。此外，它还可能拥有在单一物理宿主内部定义网络（称为虚拟网络）的功能，以允许驻留在该宿主上的虚拟机之间以及该宿主外部的物理和虚拟机之间的通讯。由于有了全部这些功能，虚拟机监视器负有责任以调度对于物理资源的访问、在驻留的虚拟机之间提供运行时隔离，以及启用虚拟网络，该虚拟网络在虚拟机之间以及虚拟机和外部网络之间提供保持安全性的通讯流。虚拟机监视器的架构可以以不同方式进行分类。此文档中的安全性建议是关于保证虚拟机监视器的基线功能的安全执行的，并且因此对于虚拟机监视器的架构不可知。更进一步地，这些建议适用于针对服务器虚拟化而部署的虚拟机监视器的上下文环境，因此并不适用于其他应用案例，诸如嵌入式系统和桌面。关于虚拟网络的安全配置的建议在另一篇 NIST 文档中解决（特别出版 800-125B）。

## 关键字

虚拟化；虚拟机监视器；虚拟机；虚拟网络；安全配置；安全性监视；客户操作系统

## 致谢

作者 Ramaswamy Chandramouli 想要感谢他的同事 Tim Grance，由于他个人对内容的贡献以及对于此出版物的组织工作的帮助。特别感谢来自 Bosch Center of Competence Security 的 Andreas Bartelt，由于他对于关于设备虚拟化技术的宝贵贡献。作者还想感谢 Michael Bartock，由于他作为分部读者的宝贵审阅和反馈。最后，同样重要的是，作者感谢 Isabel van Wyk，由于她的详细的编辑审阅。

## 对审稿人的注记

此修订版本包括用于设备虚拟化的额外技术，诸如准虚拟化、透传和自虚拟化的硬件设备等，以及相关的安全性建议。此修订版本中的主要内容更改位于第 1.1、2.2.2 节和第 5 章。

# 执行摘要

服务器虚拟化现在是用于数据中心和云服务中的企业级信息科技（IT）基础设施的一种已经确立的技术，由于它能够提供对于硬件资源的更佳利用，减少所需的物理空间，并且减少能耗和管理开销。用于服务器虚拟化的核心软件称为虚拟机监视器，它直接提供中央处理器（CPU）和内存的虚拟化。同它的支持模块一起，它允许所有硬件资源（例如 CPU、内存、网络和存储等）的虚拟化，并且因此允许多个称为虚拟机（VM）或者客户机的计算栈，其中每一个都托管操作系统（OS）（客户机 OS）和应用程序，运行在单一的物理宿主上。此物理宿主称为虚拟化宿主或者虚拟机监视器宿主。由于虚拟机监视器就其自身而言不能提供服务器虚拟化所需的所有功能，它拥有用于设备（例如网络和存储设备）虚拟化的软件模块（例如设备驱动程序），以及用于虚拟机生命周期操作和虚拟机监视器配置的管理模块。虚拟机监视器与这些支持模块以及宿主硬件一起构成了虚拟机监视器平台。虚拟机监视器可以直接安装在硬件或者裸机上（第 1 类虚拟机监视器），也可以安装在称为宿主操作系统的完整的传统操作系统上（第 2 类虚拟机监视器）。

初看起来，与虚拟机监视器及其硬件宿主（共同称为虚拟机监视器平台）的安全管理相关的所有活动可能看起来应该只是包含任何服务器级别的软件及其托管环境的已确立的最先进的技术实践。然而，仔细检查一下就会发现，用于支持虚拟机监视器所提供的硬件虚拟化的功能具有广泛的安全性后果，并且因此需要一组基于针对这些功能的安全执行的威胁的分析的目标明确的安全性建议。

由于存在多种方式对虚拟机监视器架构进行分类，此文档中所采用的方式是识别虚拟机监视器所执行的基线功能、每一项基线功能所涉及的任务、该任务的安全执行的潜在威胁，以及以安全性建议的形式给出的，能够提供担保以对抗利用这些威胁的反制措施。

以下 5 种功能被识别为虚拟机监视器平台的基线功能：

* VM 进程隔离
* 设备调度和访问控制
* 来自客户 VM 的命令的直接执行
* VM 生命周期管理
* 虚拟机监视器平台的管理

除了为保证上述基线功能的安全执行提供安全性建议以外，此文档还提供了关于保证虚拟机监视器平台的所有组件的整体完整性的建议。这些建议涵盖了第 1 类和第 2 类虚拟机监视器。

此文档并未涵盖用于虚拟机监视器所安装在其上的物理宿主的程式化管理功能的安全执行。用于反制物理访问威胁以及用于运行在 VM 上的客户 OS 和应用程序的保护要求及其相关联的安全性建议同样超出了此文档的范围。更进一步地，这些安全性建议适用于针对服务器虚拟化而部署的虚拟机监视器，并且并不涵盖其他应用案例，诸如面向桌面和嵌入式系统的虚拟机监视器应用。

